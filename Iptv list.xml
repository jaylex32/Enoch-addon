<item>
<title>[COLOR lime] PELISADICTO[/COLOR] Con paginacion</title>
<link>https://forums.tvaddons.ag/$doregex[makelist3]</link>

<regex>
<name>makelist3</name>
<listrepeat><=!=[=C=D=A=T=A=[
<title>[COLOR yellow] [makelist3.param2] [/COLOR] </title>
<link>https://forums.tvaddons.ag/$doregex[showPages]</link>
]=]=></listrepeat>
<expres><=!=[=C=D=A=T=A=[li><a rel="nofollow" href="(.*?)" title="Peliculas de (.*?)"]=]=></expres>
<page>http://pelisadicto.com/</page>
</regex>



<regex>
<name>showPages</name>
<listrepeat><=!=[=C=D=A=T=A=[
  <title>[COLOR yellow]Pagina [showPages.param1][/COLOR]</title>
    <link>https://forums.tvaddons.ag/$doregex[makelist2]</link>
      
]=]=></listrepeat>
<expres>([0-9]+),?</expres>
<page>$doregex[getPageNumbers]</page>
<referer></referer>
<cookieJar></cookieJar>
</regex>


<regex>
<name>getPageNumbers</name>
<expres><![CDATA[#$pyFunction
import re,requests
def GetLSProData(page_data,Cookie_Jar,m,url='http://pelisadicto.com[makelist3.param1]'):
  source=requests.get(url)
  frompage,topage=re.findall('pagination">.*?href=".*?">([0-9]+)<.*<a href=".*?">([0-9]+)<\/a><\/span><\/li>',source.text, re.DOTALL)[0]
  frompage=int(1)
  topage=int(topage)
  topage=topage+1
  print range(frompage,topage)
  return range(frompage,topage)
]]></expres>
<page></page>
<agent>Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5</agent>
<referer></referer>
<cookieJar></cookieJar>
</regex>




<regex>
<name>makelist2</name>
<listrepeat><=!=[=C=D=A=T=A=[
<title>[COLOR cyan] [makelist2.param2] [/COLOR] </title>
<link>https://forums.tvaddons.ag/$doregex[makelist]</link>
<thumbnail>http://pelisadicto.com/[makelist2.param3]</thumbnail>
<fanart>http://pelisadicto.com/[makelist2.param3]</fanart>
]=]=></listrepeat>
<expres><=!=[=C=D=A=T=A=[href="(.*?)" title="Ver (.*?) Online".*\s+.*src="(.*?)"]=]=></expres>
<page>http://pelisadicto.com/genero/[makelist3.param2]/</page>
<referer>http://pelisadicto.com/</referer>
</regex>

<regex>
<name>makelist</name>
<listrepeat><=!=[=C=D=A=T=A=[
<title>[COLOR blue] Opcion: [/COLOR][COLOR yellow] [makelist.param1][/COLOR]</title>
<link>https://forums.tvaddons.ag/$doregex[makelist0]</link>
]=]=></listrepeat>
<expres><=!=[=C=D=A=T=A=[href="(.*?)" rel="nofollow"]=]=></expres>
<page>http://pelisadicto.com[makelist2.param1]</page>
</regex>


</item>

<item>
<title>IPTV UK</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param3]</title>
<link>$doregex[cosmix]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    main = ''
    main += client.request('https://albaniaiptv.com/category/uk/')
    link = client.parseDOM(main, 'div', attrs = {'class': 'td_module_1 td_module_wrap td-animation-stack'})
    link = [(client.parseDOM(i, 'a', ret='href')  , client.parseDOM(i, 'img', ret='src') , client.parseDOM(i, 'img', ret='title')) for i in link]
    link = [(i[0][0], i[1][0], i[2][0]) for i in link]
    return link
]]></expres>
<page></page>
</regex>
<regex>
<name>cosmix</name>
<listrepeat><![CDATA[
<title>[cosmix.param1]</title>
<link>[cosmix.param2]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    html = client.request('[makelist.param1]')
    express = '<p><a href="(.+?)".+?<\/a><\/p>'
    links = re.compile(express, re.MULTILINE|re.DOTALL).findall(html)[0]
    main = client.request(links)
    express1 = '#EXTINF:.+?,(.+?)\n(.+?)\s'
    list = re.compile(express1, re.MULTILINE|re.DOTALL).findall(main)
    return list
]]></expres>
<page></page>
</regex>
</item>

<item>
<title>IPTV SPAIN</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param3]</title>
<link>$doregex[cosmix]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    main = ''
    main += client.request('https://albaniaiptv.com/category/spain/')
    link = client.parseDOM(main, 'div', attrs = {'class': 'td_module_1 td_module_wrap td-animation-stack'})
    link = [(client.parseDOM(i, 'a', ret='href')  , client.parseDOM(i, 'img', ret='src') , client.parseDOM(i, 'img', ret='title')) for i in link]
    link = [(i[0][0], i[1][0], i[2][0]) for i in link]
    return link
]]></expres>
<page></page>
</regex>
<regex>
<name>cosmix</name>
<listrepeat><![CDATA[
<title>[cosmix.param1]</title>
<link>[cosmix.param2]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    html = client.request('[makelist.param1]')
    express = '<p><a href="(.+?)".+?<\/a><\/p>'
    links = re.compile(express, re.MULTILINE|re.DOTALL).findall(html)[0]
    main = client.request(links)
    express1 = '#EXTINF:.+?,(.+?)\n(.+?)\s'
    list = re.compile(express1, re.MULTILINE|re.DOTALL).findall(main)
    return list
]]></expres>
<page></page>
</regex>
</item>

<item>
<title>IPTV SPORT</title>
<link>$doregex[makelist]</link>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
<title>[makelist.param3]</title>
<link>$doregex[cosmix]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    main = ''
    main += client.request('https://albaniaiptv.com/category/sport/')
    link = client.parseDOM(main, 'div', attrs = {'class': 'td_module_1 td_module_wrap td-animation-stack'})
    link = [(client.parseDOM(i, 'a', ret='href')  , client.parseDOM(i, 'img', ret='src') , client.parseDOM(i, 'img', ret='title')) for i in link]
    link = [(i[0][0], i[1][0], i[2][0]) for i in link]
    return link
]]></expres>
<page></page>
</regex>
<regex>
<name>cosmix</name>
<listrepeat><![CDATA[
<title>[cosmix.param1]</title>
<link>[cosmix.param2]</link>
<thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client
    import re, urllib, base64, xbmcgui, json

    html = client.request('[makelist.param1]')
    express = '<p><a href="(.+?)".+?<\/a><\/p>'
    links = re.compile(express, re.MULTILINE|re.DOTALL).findall(html)[0]
    main = client.request(links)
    express1 = '#EXTINF:.+?,(.+?)\n(.+?)\s'
    list = re.compile(express1, re.MULTILINE|re.DOTALL).findall(main)
    return list
]]></expres>
<page></page>
</regex>
</item>
