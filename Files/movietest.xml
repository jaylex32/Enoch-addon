<item>
<title>Ultramov - TVshows</title>
<link>$doregex[makelist]</link>
<thumbnail>http://phoenixtv.offshorepastebin.com/art/tv/phoenixshowsshowlist.png</thumbnail>
<regex>
<name>makelist</name>
<listrepeat><![CDATA[
        <title>[makelist.param3] [makelist.param4]</title>
        <link>$doregex[eps]</link>
        <thumbnail>[makelist.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = ''):
    from resources.lib.modules import client,cache,workers 
    import re

    class page:
        def run(self, r):
            threads = [] ; self.r = [] ; r = [(r.index(i)+1, i) for i in r]
            for i in r: threads.append(workers.Thread(self.request, i))
            [i.start() for i in threads] ; [i.join() for i in threads]
            return ''.join([str(i[1]) for i in sorted(self.r, key=lambda x: x[0])])
        def request(self, i):
            self.r += [(i[0], str(client.request(i[1])))]
    def unescape(s):
        return re.sub('&#(\d+);', '', s)         

    url = []
    for i in range(1, 7): url += ['https://ultramovie.me/tvshows/page/' + str(i)]
    u = cache.get(page().run, 0, url)
    e = re.findall('(?s)item tvshows">.+?f="([^"]*).+?c="([^"]*).+?alt="([^"]*).+?<span>([^<]*)', u)
    e = [(i[0], unescape(i[1]), i[2], i[3]) for i in e]
    return e
]]></expres>
<page></page>
</regex>
<regex>
<name>eps</name>
<listrepeat><![CDATA[
        <title>[eps.param3] :[eps.param4]</title>
        <link>$doregex[playurl]</link>
        <thumbnail>[eps.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = '[makelist.param1]'):
    from resources.lib.modules import client
    import re, urllib, xbmc, xbmcgui
    u = client.request(url)
    e = re.findall('(?s)imagen">.+?f="([^"]*).+?c="([^"]*).+?do">([^<]*).+?te">([^<]*)', u)
    e = [(i[0],i[1],'Season'+i[2],i[3]) for i in e]
    return e
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
<regex>
<name>playurl</name>
<listrepeat><![CDATA[
        <title>[playurl.param1]</title>
        <link>[playurl.param2]</link>
        <thumbnail>[eps.param2]</thumbnail>
]]></listrepeat>
<expres><![CDATA[#$pyFunction
def GetLSProData(page_data,Cookie_Jar,m,url = '[eps.param1]'):
    from resources.lib.modules import client
    import re, urllib, xbmc, xbmcgui
    from resources.lib.modules import control
    phoenixstreamer = control.cdnImport('https://raw.githubusercontent.com/jaylex32/Enoch-addon/master/Files/Enochstreams.py')
    phoenixstreamer = phoenixstreamer.streamer()
    url = phoenixstreamer.resolve(url)
    return url
]]></expres>
<page></page>
<cookieJar></cookieJar>
</regex>
</item>
